<!DOCTYPE html>
<!-- The ng-app is related to a module -->
<html ng-app="demo">
<head>
    <title>Fora by Robusta Code</title>
    <link rel="stylesheet" type="text/css" href="../../css/style.css"/>
    <script type="text/javascript" src="../../javascripts/libs/angular.min.js"></script>
    <script type="text/javascript" src="../mock-data.js"></script>

</head>
<!-- The controller is found in the spotted module -->
<body >

<div ng-controller="AppCtrl">

<ul>
    <li ng-repeat="user in users">{{user.name}}</li>
</ul>

</div>

<div ng-controller="MessageCtrl">



</div>

</body>

<script type="text/javascript">

    /**
     * Goals :
     * - Get started with Angular
     * - What does the ng-repeat directive ?
     * - What is the created variable in the scope context ?
     */

    angular.module("demo", [])
            .controller("AppCtrl", function ($scope) {

                $scope.users = globals.users;

                $scope.getAdmins = function(users){
                    return globalGetAdmins(users);
                }

                //TODO :
                /**
                 * - display ids and emails of each users
                 * - show the admins: create a list of admins from globals.users
                 * - write $scope.getAdmins() into a more javascript way
                 */

            });


    /**
     * TODO : create a second controller with a {{message}} data
     */
    function globalGetAdmins (users){

        var result = []
        //ouch, no underscore there...
        for (var i = 0 ; i < users.length ; i++){
            if (users[i].admin){
                result.push(users[i])
            }
        }
        return result;
    }

</script>
</html>