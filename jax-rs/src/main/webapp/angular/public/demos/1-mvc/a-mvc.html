<!DOCTYPE html>
<!-- The ng-app is related to a module -->
<html ng-app="demo">
<head>
    <title>MVC</title>
    <link rel="stylesheet" type="text/css" href="../styles.css"/>
    <script type="text/javascript" src="../libs/angular.min.js"></script>
    <script type="text/javascript" src="../mock-data.js"></script>  <!--RFRF : ctrl clic pour suivre le lien -->

</head>
<!-- The controller is found in the spotted module -->
<body >

<div ng-controller="AppCtrl">

    <!-- RFRF: String interprete pour construire du html Ã  la volee -->
<ul>
    <li ng-repeat="user in users | filter:{admin:false}">{{user.id}} : {{user.name}} ( {{user.email}} )
        <button ng-click="user.admin=true">Set admin</button>
    </li>
</ul>

<ul>
    <li ng-repeat="admin in getAdmins(users)">{{admin.id}} : {{admin.name}} - "{{admin.statement}}" ( {{admin.email}} )
        <button ng-click="admin.admin=false">Unset admin</button>
    </li>
</ul>

</div>


</body>

<script type="text/javascript">

    /**
     * Goals :
     * - Get started with Angular
     * - What does the ng-repeat directive ?
     * - What is the created variable in the scope context ?
     */

    angular.module("demo", [])
            .controller("AppCtrl", function ($scope) {  /* RFRF : La fonction est notre controleur*/

                $scope.users = globals.users;   /* RFRF : Le scope users est notre modele*/

                $scope.getAdmins = function(users){
                    return users.filter(function(user){
                        return user.admin;
                    });
                };

                //TODO :
                /**
                 * - display ids and emails of each users   RFRF : OK
                 * - show the admins: create a list of admins from globals.users RFRF : OK
                 */

            });



</script>
</html>